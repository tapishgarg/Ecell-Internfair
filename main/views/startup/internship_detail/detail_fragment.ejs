<section>
    <div class="block" id="internship_detail_fragment">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 column">
                    <div class="job-single-sec">
                        <div class="job-single-head2">
                            <div class="job-title2"><h3>Senior Web Designer</h3><span class="job-is ft">Full time</span><i
                                        class="la la-heart-o"></i></div>
                            <ul class="tags-jobs">
                                <li><i class="la la-map-marker"></i> Sacramento, California</li>
                                <li><i class="la la-money"></i> Monthly Salary : <span>$3000 - $5000</span></li>
                                <li><i class="la la-calendar-o"></i> Vacancies: 10</li>
                            </ul>
                            <span style="padding-left: 32px;"> IITM Research Park :</span>
                        </div><!-- Job Head -->
                        <div class="job-details">
                            <h3>About the Startup</h3>
                            <pre style="color: black;">
				 					dbjsdbfdfbdfsbvxcvxnnl
				 					vxcvxcvcvvxcvcxcv
				 					sdgsfdfg
				 					fdgfd
				 				</pre>
                            <p>Company is a 2016 Iowa City-born start-up that develops consectetuer adipiscing elit.
                                Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel,
                                dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor
                                libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo.
                                Suspendisse potenti.</p>
                            <p>Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero
                                eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed
                                lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum
                                volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien</p>
                            <h3>Internship Description</h3>
                            <p>Company is a 2016 Iowa City-born start-up that develops consectetuer adipiscing elit.
                                Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel,
                                dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor
                                libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo.
                                Suspendisse potenti.</p>
                            <p>Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero
                                eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed
                                lectus. Praesent elementum hendrerit tortor. Sed semper lorem at felis. Vestibulum
                                volutpat, lacus a ultrices sagittis, mi neque euismod dui, eu pulvinar nunc sapien</p>
                            <h3>Required Knowledge, Skills, and Abilities</h3>
                            <ul>
                                <li>Ability to write code â€“ HTML & CSS (SCSS flavor of SASS preferred when writing
                                    CSS)
                                </li>
                                <li>Proficient in Photoshop, Illustrator, bonus points for familiarity with Sketch
                                    (Sketch is our preferred concepting)
                                </li>
                                <li>Cross-browser and platform testing as standard practice</li>
                                <li>Experience using Invision a plus</li>
                                <li>Experience in video production a plus or, at a minimum, a willingness to learn</li>
                            </ul>
                            <h3>Specific Requirements</h3>
                            <ul>
                                <li>Advanced degree or equivalent experience in graphic and web design</li>
                                <li>3 or more years of professional design experience</li>
                                <li>Direct response email experience</li>
                                <li>Ecommerce website design experience</li>
                                <li>Familiarity with mobile and web apps preferred</li>
                                <li>Excellent communication skills, most notably a demonstrated ability to solicit and
                                    address creative and design feedback
                                </li>
                                <li>Must be able to work under pressure and meet deadlines while maintaining a positive
                                    attitude and providing exemplary customer service
                                </li>
                                <li>Ability to work independently and to carry out assignments to completion within
                                    parameters of instructions given, prescribed routines, and standard accepted
                                    practices
                                </li>
                            </ul>

                            <h3>Incentives</h3>
                            <ul>
                                <li style="font-weight: bold;">Stipend :</li>
                                <li style="font-weight: bold;">Accomodation :</li>
                                <li style="font-weight: bold;">Travel Allowance :</li>
                                <li style="font-weight: bold;">Other :</li>
                            </ul>
                        </div>

                    </div>
                </div>
                <div class="col-lg-4 column">
                    <div class="job-single-head style2">
                        <div class="job-thumb"><img src="http://placehold.it/124x124" alt=""/></div>
                        <div class="job-head-info">
                            <h4>Tix Dog</h4>
                            <span>274 Seven Sisters Road, London, N4 2HY</span>
                        </div>
                        <a href="#" title="" class="apply-job-btn"><i class="la la-paper-plane"></i>Edit</a>
                        <a href="/startup/manage" title="" class="viewall-jobs">Manage</a>
                    </div><!-- Job Head -->
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    let internship_detail_fragment  = new Vue({
        el: "#internship_detail_fragment",
        data: {
            startup_post: {
                internship_title: "",
                description: "",
                attachement_url: "",
                internship_profile: "",
                duration: "",
                stipend: "",
                interns_number: "",
                location: "",
                research_park_startup: "",
                skill_requirement: "",
                specific_requirement: "",
                accomodation: "",
                travel_allowance: "",
                other_incentives: "",
                address: ""
            }
        },
        methods: {
            open_widget: () => {
                let myUploadWidget = cloudinary.openUploadWidget({
                        cloudName: "saarang2017",
                        uploadPreset: "ecell_iitm",
                        //Step 3:  Add list of sources that should be added as tabs in the widget.
                        sources: [
                            "local",
                            "url",
                            "camera"
                        ],
                    },
                    function (error, result) {
                        if (result.event === "success") {
                            startup_post_add_app.startup_post.attachement_url = result.info.secure_url;
                            console.log(result.info.secure_url);
                            myUploadWidget.close();
                        }
                    });
            },
            submit_startup_post: () => {
                let form = document.getElementById('theForm');
                for (let i = 0; i < form.elements.length; i++) {
                    if (form.elements[i].value === '' && form.elements[i].hasAttribute('required')) {
                        alert("Fill all required fields");
                        return false;
                    }
                }
                let reqBody = {
                    query_string: 'mutation {\n' +
                        '  update_startup_post(where: {id: {_eq: 43}}, _set: {internship_title: "' + startup_post_add_app.startup_post.internship_title + '", description: "' + startup_post_add_app.startup_post.description + '", attachement_url: "' + startup_post_add_app.startup_post.attachement_url + '", internship_profile: "' + startup_post_add_app.startup_post.internship_profile + '", duration: "' + startup_post_add_app.startup_post.duration + '", stipend: "' + startup_post_add_app.startup_post.stipend + '", interns_number: "' + startup_post_add_app.startup_post.interns_number + '", location: "' + startup_post_add_app.startup_post.location + '", research_park_startup: "' + startup_post_add_app.startup_post.research_park_startup + '", skill_requirement: "' + startup_post_add_app.startup_post.skill_requirement + '", specific_requirement: "' + startup_post_add_app.startup_post.specific_requirement + '", accomodation: "' + startup_post_add_app.startup_post.accomodation + '", travel_allowance: "' + startup_post_add_app.startup_post.travel_allowance + '", other_incentives: "' + startup_post_add_app.startup_post.other_incentives + '", address: "' + startup_post_add_app.startup_post.address + '", user_hid: "' + JSON.parse(Cookies.get('auth_details')).h_id + '", startup_details_id: ' + JSON.parse(Cookies.get('startup_details')).id + '}) {\n' +
                        '    affected_rows\n' +
                        '  }\n' +
                        '}\n'
                };
                axios.post('/db/user', reqBody)
                    .then(function (response) {
                        if (response.data.data !== undefined) {
                            if (response.data.data.update_startup_post.affected_rows > 0) {
                                location.href = "/startup/manage";
                            }
                        } else {

                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
                return false;
            },
            get_internship_detail: () => {
                let reqBody = {
                    query_string: '{\n' +
                        '  startup_post(where: {id: {_eq: <% if (startup_id) { %><%=startup_id%><% } else { %>0<% } %>}}) {\n' +
                        '    internship_title\n' +
                        '    description\n' +
                        '    attachement_url\n' +
                        '    internship_profile\n' +
                        '    duration\n' +
                        '    stipend\n' +
                        '    interns_number\n' +
                        '    location\n' +
                        '    research_park_startup\n' +
                        '    skill_requirement\n' +
                        '    specific_requirement\n' +
                        '    accomodation\n' +
                        '    travel_allowance\n' +
                        '    other_incentives\n' +
                        '    address\n' +
                        '  }\n' +
                        '}\n'
                };
                axios.post('/db/user', reqBody)
                    .then(function (response) {

                        if (response.data.data !== undefined) {
                            console.log(JSON.stringify(response.data));
                            if (response.data.data.startup_post[0] !== undefined) {
                                startup_post_add_app.startup_post = response.data.data.startup_post[0];
                            }
                        } else {

                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });

            }
        }, mounted: function () {
            this.$nextTick(function () {
                this.get_internship_detail();
            })
        }
    });
</script>